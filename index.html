<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>IrrigaSeca 1.15</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.1"></script> 
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
<link rel="stylesheet" href="style.css"> 
</head>
<body>
<div id="c">
  <h2>Gráfico de Umidade - IrrigaSeca</h2>
  
  <div class="menu">
    <div><label>Ano:<select id="a"></select></label></div>
    <div><label>Mês:<select id="m"></select></label></div> 
    <div><label>Período:<select id="p">
      <option value="24h">24h</option><option value="7d">7d</option>
      <option value="15d">15d</option><option value="30d">30d</option>
      <option value="60d">60d</option><option value="90d">90d</option>
      <option value="all" selected>Tudo</option>
    </select></label></div>
  </div>
  <br/>
  <canvas id="graf"></canvas>

  <div id="pred">
    <h2>Análise Preditiva e Previsão de Seca</h2>
    
    <div id="pred-content">
      
      <div class="blc blc-20"><h3>Status de Risco</h3>
        <table class="tbl" id="tbl">
          <tr><td colspan="2">Carregando...</td></tr>
        </table>
      </div>
      
      <div class="blc blc-50"><h3>Umidade Atual - Mapa de Calor</h3>
        <div id="map"></div>
      </div>
      
      <div class="blc blc-30"><h3>Previsão do Tempo (7 Dias)</h3>
        <div id="forecast-data">Carregando previsão...</div>
        <p class="nota">Integração futura: OpenWeatherMap, WeatherAPI, etc.</p>
      </div>
    </div>
  </div>

  <div id="telemetry">
    <h2>Telemetria em Tempo Real
      <!-- NOVO SELETOR -->
      <select id="telemetry-fileira-select" onchange="loadTelemetryTable(this.value)">
        <option value="fileiraA">Fileira A (Argiloso)</option>
        <option value="fileiraB" selected>Fileira B (Arenoso)</option>
        <option value="fileiraC">Fileira C (Média)</option>
        <option value="fileiraD">Fileira D (Fino)</option>
      </select>
    </h2>
    <div class="blc">
      <table class="tbl" id="tbl-telemetria">
        <thead> 
            <tr>
              <th>Sensor ID</th>
              <th>Umidade (%)</th>
              <th>Status</th>
              <th>Umid. Crítica (Pior Sensor)</th>
            </tr>
        </thead>
        <tbody>
            <tr><td colspan="4">Carregando dados individuais...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="fixed-footer">
    <a href="login.html">Painel de Configurações</a>
</div>

<script src="app.js"></script> 
</body>
</html>